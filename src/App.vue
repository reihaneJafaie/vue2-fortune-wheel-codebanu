<template>
  <div class="main">
    <FortuneWheel
      ref="child"
      @onCanvas="onCanvasRotateStart"
      @onRotateEnd="onRotateEnd"
      v-if="allSpinRewards.length"
      :prizes="allSpinRewards"
      :prizeId="2"
    />

    <ModalDialog
      @visible="visible"
      :statusVisible="showModal"
      :title="modalData.title"
      :message="modalData.message"
      :discountCode="modalData.discountCode"
    />

    <button @click="onCanvasRotateStart"> SPIN </button>
  </div>
</template>

<script>
import FortuneWheel from "./components/FortuneWheel.vue";
import ModalDialog from "./components/modalDialog.vue";

export default {
  components: {
    FortuneWheel,
    ModalDialog,
  },
 
  data() {
    return {
      prizeId : null ,
      showModal: false,
      modalData: {
        title: "",
        message: "",
        discountCode: "",
      },
      allSpinRewards: [
        { id: 0, name: "Ù¾ÙˆÚ†", value: 5, probability: 30, bgColor : '#ccc' },
        { id: 1, name: "100 Ø§Ù…ØªÛŒØ§Ø²", value: 5, probability: 20, bgColor : '#fff' },
        { id: 2, name: "10 Ø¨Ù†", value: 5, probability: 15, bgColor : '#ccc' },
        { id: 3, name: "3$ wallet", value: 5, probability: 10, bgColor : '#fff' },
        { id: 4, name: "30% discount", value: 5, probability: 10, codePesentCopon: "zghruigh", bgColor : '#ccc' },
        { id: 5, name: "3$ discount", value: 5, probability: 10, bgColor : '#fff' },
      ],
    };
  },
  
  methods: {
    async onCanvasRotateStart() {
      this.$refs.child.spinWheel(2);
    },

    onRotateEnd() {
      // const selectedPrize = this.allSpinRewards[this.finalPrize];
      // if (selectedPrize.name === "Ù¾ÙˆÚ†") {
      //   this.modalData = {
      //     title: "ğŸ˜ Ù…ØªØ£Ø³ÙÛŒÙ…!",
      //     message: "Ù…ØªØ£Ø³ÙØ§Ù†Ù‡ Ø§ÛŒÙ† Ø¨Ø§Ø± Ú†ÛŒØ²ÛŒ Ø¨Ø±Ù†Ø¯Ù‡ Ù†Ø´Ø¯ÛŒØŒ Ø§Ù…Ø§ Ø´Ø§Ù†Ø³Øª Ø±Ùˆ Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ø§Ù…ØªØ­Ø§Ù† Ú©Ù†! ğŸ¡",
      //   };
      // } else {
      //   this.modalData = {
      //     title: "ğŸ‰ ØªØ¨Ø±ÛŒÚ©! ğŸ‰",
      //     message: `Ø´Ù…Ø§ Ø¨Ø±Ù†Ø¯Ù‡ ${selectedPrize.name} Ø´Ø¯ÛŒØ¯! ğŸ`,
      //     discountCode: selectedPrize.codePesentCopon || "",
      //   };
      // }
      // this.showModal = true;
    },

    visible(toggle) {
      this.showModal = toggle;
    },
  },
};
</script>